# Telegram бот для уроков

Бот умеет:
- записывать урок: школа, ученик, дата, время начала и конца;
- отправлять напоминание за 30 минут до начала и за 10 минут до конца;
- удалять сообщения о начале/конце урока через 10 минут;
- через 5 минут после конца урока присылать уведомление с кнопками:
  - `Заполнить отчет`
  - `Подтвердить урок`
- при подтверждении урок помечается как завершенный (в списке отображается зачеркнутым);
- в 09:00 отправлять утреннюю сводку на день и повторять в 09:30;
- редактировать уроки через отдельную кнопку `Редактировать запись` с повторным заполнением формы;
- удалять конкретный урок через отдельную кнопку `Удалить запись`;
- считать оплату в гривнах (включая формат `2*350`);
- показывать суммы по школам и общий итог;
- отправлять служебные уведомления о событиях (сохранение урока, отчет, подтверждение, удаление) всем пользователям;
- работать в общем режиме для двух пользователей (общие уроки и отчеты).

## Кнопки
- `Записать на урок`
- `Отчет о уроке`
- `Все записи`
- `Редактировать запись`
- `Удалить запись`
- `Удалить все записи`
- `Назад` (во время заполнения формы)

## Удаление всех записей
Кнопка `Удалить все записи` работает с подтверждением:
- `Да, удалить`
- `Нет`

## Запуск локально
```bash
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
export BOT_TOKEN="ВАШ_ТОКЕН"
python bot.py
```

## Railway (24/7)
1. Подключите GitHub-репозиторий в Railway.
2. В `Variables` задайте:
```bash
BOT_TOKEN=ВАШ_ТОКЕН
DB_PATH=/data/bot_data.sqlite3
APP_TZ=Europe/Kyiv
```
3. Обязательно подключите `Volume` и примонтируйте в `/data`.
4. Railway запускает бота командой из `railway.json`: `python bot.py`.

Важно: без Volume база SQLite на Railway теряется при redeploy.  
Теперь бот в Railway не запустится, если `DB_PATH` не в `/data` или `/data` не смонтирован.
